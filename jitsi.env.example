# Jitsi Meet Docker 部署环境变量配置
# 复制此文件为 jitsi.env 并修改配置值

# ==================== 基础配置 ====================
# Jitsi 配置文件目录
JITSI_CONFIG_DIR=/opt/jitsi-meet-cfg

# Jitsi 公共访问地址（必须配置，用于生成 JWT）
JITSI_PUBLIC_URL=http://localhost:8080
# 生产环境示例：JITSI_PUBLIC_URL=https://jitsi.yourdomain.com

# ==================== XMPP 配置 ====================
# XMPP 域名（内部使用，不需要真实域名）
JITSI_XMPP_DOMAIN=meet.jitsi
JITSI_XMPP_AUTH_DOMAIN=auth.meet.jitsi
JITSI_XMPP_GUEST_DOMAIN=guest.meet.jitsi
JITSI_XMPP_MUC_DOMAIN=muc.meet.jitsi
JITSI_XMPP_INTERNAL_MUC_DOMAIN=internal-muc.meet.jitsi
JITSI_XMPP_RECORDER_DOMAIN=recorder.meet.jitsi
JITSI_XMPP_SERVER=jitsi_prosody

# XMPP 端口
JITSI_XMPP_PORT=5222
JITSI_XMPP_INTERNAL_PORT=5347

# ==================== JWT 认证配置 ====================
# 必须与后端配置一致！
JITSI_JWT_APP_ID=your_jitsi_app_id
JITSI_JWT_APP_SECRET=your_jitsi_app_secret_for_jwt_signing

# JWT 接受的 Issuer（通常与 APP_ID 相同）
JITSI_JWT_ACCEPTED_ISSUERS=your_jitsi_app_id

# JWT 接受的 Audience（通常与 PUBLIC_URL 相同）
JITSI_JWT_ACCEPTED_AUDIENCES=http://localhost:8080

# JWT 认证类型
JITSI_JWT_AUTH_TYPE=token
JITSI_JWT_TOKEN_AUTH_MODULE=token_verification
JITSI_JWT_ALLOW_EMPTY=false

# ==================== 认证配置 ====================
# 启用认证（必须为 1，使用 JWT）
JITSI_ENABLE_AUTH=1

# 禁用访客模式（必须为 0，强制 JWT 认证）
JITSI_ENABLE_GUESTS=0

# 认证类型
JITSI_AUTH_TYPE=jwt

# ==================== 服务认证密码 ====================
# 这些密码会在首次启动时自动生成（如果目录不存在）
# 建议手动设置强密码

# Jicofo 组件密钥（随机生成，至少 16 字符）
JITSI_JICOFO_COMPONENT_SECRET=$(openssl rand -hex 16)

# Jicofo 认证用户和密码
JITSI_JICOFO_AUTH_USER=focus
JITSI_JICOFO_AUTH_PASSWORD=$(openssl rand -hex 16)

# JVB 认证用户和密码
JITSI_JVB_AUTH_USER=jvb
JITSI_JVB_AUTH_PASSWORD=$(openssl rand -hex 16)

# ==================== 端口配置 ====================
# HTTP/HTTPS 端口（避免与主应用冲突）
JITSI_HTTP_PORT=8080
JITSI_HTTPS_PORT=8443

# JVB 端口（UDP 和 TCP）
JITSI_JVB_PORT=10000
JITSI_JVB_TCP_PORT=4443

# ==================== 网络配置 ====================
# Docker 主机地址（用于 NAT 穿透）
# 如果使用 Docker Compose，通常不需要设置
# 如果直接运行，设置为服务器公网 IP
JITSI_DOCKER_HOST_ADDRESS=

# STUN 服务器：留空禁用外链，不连接官网或第三方
JITSI_JVB_STUN_SERVERS=

# ==================== 功能配置 ====================
# 禁用 HTTPS（开发环境，生产环境应启用）
JITSI_DISABLE_HTTPS=1

# 启用 HTTP 重定向到 HTTPS（生产环境）
JITSI_ENABLE_HTTP_REDIRECT=0

# 启用 Let's Encrypt（生产环境）
JITSI_ENABLE_LETSENCRYPT=0
JITSI_LETSENCRYPT_DOMAIN=
JITSI_LETSENCRYPT_EMAIL=

# 启用转录（可选）
JITSI_ENABLE_TRANSCRIPTIONS=0

# 启用 SCTP（可选）
JITSI_ENABLE_SCTP=0

# ==================== 日志配置 ====================
# 仅记录错误，重启后持久生效
JITSI_LOG_LEVEL=ERROR

# ==================== 时区配置 ====================
TZ=Asia/Shanghai
